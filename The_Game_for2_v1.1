def main():
    game_list = "  {}  |  {}  |  {}  "
    def display(board):
        print("     |     |     ")
        print(game_list.format(board[0], board[1], board[2]))
        print("     |     |     ")
        print("-----------------")
        print("     |     |     ")
        print(game_list.format(board[3], board[4], board[5]))
        print("     |     |     ")
        print("-----------------")
        print("     |     |     ")
        print(game_list.format(board[6], board[7], board[8]))
        print("     |     |     ")
    
    def beginning():
        start = "WRONG"
    
        while start.lower() not in ['y','n','yes','no']:
            start = input("Start the game? (Yes or No) ")
        
            if start.lower() not in ['y','n','yes','no']:
                print('Sorry, I dont understand, please choose Yes or No')
           
        if start.lower() in ('Yes','y'):
            return True
        else:
            return False
    
    def XorO():
        choice = "WRONG"
    
        while choice.lower() not in ['x','o']:
            choice = input("Do you want to be X or O ? (X starts first)")
        
            if choice.lower() not in ['x','o']:
                print('Choose between X and O')
           
        if choice.lower() == 'x':
                print("Player X:starts first")
                return True
        
        if choice.lower() == 'o':
                print("Player O:starts first")
                return False
            
    def Choose_positionX():
        choose = "WRONG"
        acceptable_range = range(1,10)
        within_range = False
    
        while choose.isdigit() == False or within_range == False:
            choose = input("Player 'X' choose your next position (1-9): ")
         
            if choose.isdigit() == False:
                print('Sorry that is not a digit!')
            
            if choose.isdigit() == True:
                if int(choose) in acceptable_range and board[int(choose) - 1] == " ":
                    within_range = True
                else:
                    within_range = False
                    print('Sorry, your choice is not acceptable!')
    
        board[int(choose) - 1] = "X"
        display(board)
        
    
    def Choose_positionO():
        choose = "WRONG"
        acceptable_range = range(1,10)
        within_range = False
    
        while choose.isdigit() == False or within_range == False:
            choose = input("Player 'O' choose your next position (1-9): ")
         
            if choose.isdigit() == False:
                print('Sorry that is not a digit!')
            
            if choose.isdigit() == True:
                if int(choose) in acceptable_range and board[int(choose) - 1] == " ":
                    within_range = True
                else:
                    within_range = False
                    print('Sorry, your choice is not acceptable!')
    
        board[int(choose) - 1] = "O"
        display(board)
    
    def win_conditionX():
        if board[0] == "X" and board[1] == "X"and board[2] == "X":
            return False
        elif board[3] == "X" and board[4] == "X"and board[5] == "X":
            return False
        elif board[6] == "X" and board[7] == "X"and board[8] == "X":
            return False
        elif board[0] == "X" and board[3] == "X"and board[6] == "X":
            return False
        elif board[1] == "X" and board[4] == "X"and board[7] == "X":
            return False
        elif board[2] == "X" and board[5] == "X"and board[8] == "X":
            return False
        elif board[0] == "X" and board[4] == "X"and board[8] == "X":
            return False
        elif board[2] == "X" and board[4] == "X"and board[6] == "X":
            return False
        
        else:
            return True
        
    def win_conditionO():
        if board[0] == "O" and board[1] == "O"and board[2] == "O":
            return False
        elif board[3] == "O" and board[4] == "O"and board[5] == "O":
            return False
        elif board[6] == "O" and board[7] == "O"and board[8] == "O":
            return False
        elif board[0] == "O" and board[3] == "O"and board[6] == "O":
            return False
        elif board[1] == "O" and board[4] == "O"and board[7] == "O":
            return False
        elif board[2] == "O" and board[5] == "O"and board[8] == "O":
            return False
        elif board[0] == "O" and board[4] == "O"and board[8] == "O":
            return False
        elif board[2] == "O" and board[4] == "O"and board[6] == "O":
            return False
        
        else:
            return True
    
    board = [" ", " ", " ", " ", " ", " ", " ", " ", " "]
    game_on = beginning()
    
    if game_on == True:
        player_choice = XorO()
        display(board)
       
    
    while game_on == True:
                
        if win_conditionX() == False:
            game_on = False
            print("Player 'X' is the winner!")
        elif win_conditionO() == False:
            game_on = False
            print("Player 'O' is the winner!")
        else:
            if player_choice:  # Хід гравця X
                Choose_positionX()
                player_choice = False
            else:  # Хід гравця O
                Choose_positionO()
                player_choice = True
    
        if not game_on:
            board = [" ", " ", " ", " ", " ", " ", " ", " ", " "]
            game_on = beginning()
            
        
if __name__ == "__main__":
    main()

